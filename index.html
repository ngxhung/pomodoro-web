<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Focus - Liquid Pomodoro</title>
    
    <!-- 1. Cài đặt Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Cấu hình Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    keyframes: {
                        'expand-panel': {
                            'from': { opacity: '0', transform: 'scale(0.5) translate(100px, 100px)' },
                            'to': { opacity: '1', transform: 'scale(1) translate(0, 0)' }
                        },
                        'slide-in-left': {
                            'from': { opacity: '0', transform: 'translateX(-20px)' },
                            'to': { opacity: '1', transform: 'translateX(0)' }
                        },
                        'typing': {
                            '0%, 80%, 100%': { transform: 'scale(0)' },
                            '40%': { transform: 'scale(1)' }
                        }
                    },
                    animation: {
                        'expand-settings': 'expand-panel 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-chat': 'slide-in-left 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <!-- 3. Cài đặt React & Babel -->
    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.263.1"
            }
        }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- CSS Bổ sung -->
    <style>
        body { background: #000; overflow: hidden; }
        
        .glass-element {
            background: linear-gradient(135deg, rgba(255, 255, 255, calc(var(--glass-opacity, 0) + 0.05)) 0%, rgba(255, 255, 255, var(--glass-opacity, 0)) 100%);
            backdrop-filter: blur(12px) saturate(160%) contrast(110%);
            -webkit-backdrop-filter: blur(12px) saturate(160%) contrast(110%);
            border-top: 1px solid rgba(255, 255, 255, 0.4);
            border-left: 1px solid rgba(255, 255, 255, 0.4);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1), inset 1px 1px 2px rgba(255, 255, 255, 0.3), inset -5px -5px 15px rgba(0, 0, 0, 0.05), inset 5px 5px 15px rgba(255, 255, 255, 0.2);
            border-radius: 24px;
        }

        .glass-chat-window {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.2) 100%);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .glass-pill { border-radius: 9999px !important; }
        
        .glass-button {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(8px) saturate(180%);
            -webkit-backdrop-filter: blur(8px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-top: 1px solid rgba(255, 255, 255, 0.5);
            border-left: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1), inset 2px 2px 5px rgba(255,255,255,0.4), inset -2px -2px 5px rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative; overflow: hidden;
        }
        .glass-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15), inset 2px 2px 8px rgba(255,255,255,0.6);
            background: linear-gradient(145deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
        }
        .glass-button:active { transform: translateY(1px) scale(0.98); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .glass-pill-bg { background: rgba(255, 255, 255, 0.25); box-shadow: 0 4px 15px rgba(0,0,0,0.1); backdrop-filter: blur(4px); }
        .text-shadow-lg { text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        
        .glass-input {
            background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: inset 1px 1px 4px rgba(0,0,0,0.1); color: inherit;
        }
        .glass-input:focus { background: rgba(0, 0, 0, 0.3); outline: none; border-color: rgba(255, 255, 255, 0.5); }
        
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #ffffff; cursor: pointer; margin-top: -6px; box-shadow: 0 2px 4px rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.8); }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: rgba(255,255,255,0.3); border-radius: 2px; }
        
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }
        
        .bubble-user {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px 16px 0 16px;
        }
        .bubble-ai {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px 16px 16px 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- 4. CODE REACT CHÍNH -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { Play, Pause, RotateCcw, Settings, Upload, Check, Clock, Palette, Sun, Eye, Type, X, Sparkles, Send, AlertCircle } from 'lucide-react';

        const App = () => {
            // --- API KEY ---
            const apiKey = "AIzaSyA_B9n7Is25AkgS5TCFl_Ys4I-6udX7bf0"; 

            // --- HÌNH NỀN DỰ PHÒNG ---
            //const DEFAULT_BG = 'https://images.unsplash.com/photo-1470252649378-9c29740c9fa8?q=80&w=2070&auto=format&fit=crop';

            const [durations, setDurations] = useState({ focus: 45, shortBreak: 5, longBreak: 15 });
            const MODES = {
                focus: { id: 'focus', label: 'Tập trung' },
                shortBreak: { id: 'shortBreak', label: 'Nghỉ ngắn' },
                longBreak: { id: 'longBreak', label: 'Nghỉ dài' },
            };
            const modeKeys = Object.keys(MODES);

            const [mode, setMode] = useState('focus');
            const [timeLeft, setTimeLeft] = useState(durations.focus * 60);
            const [isActive, setIsActive] = useState(false);
            const timerRef = useRef(null);

            // --- CONFIG HÌNH NỀN ---
            const [bgType, setBgType] = useState('video'); 
            const [bgUrl, setBgUrl] = useState('./video.mp4'); 
            const [videoError, setVideoError] = useState(false);

            const [customInput, setCustomInput] = useState('');
            const [bgBrightness, setBgBrightness] = useState(0.4);
            const [bgBlur, setBgBlur] = useState(0); 
            const [textColor, setTextColor] = useState('#ffffff'); 
            const [glassOpacity, setGlassOpacity] = useState(0); 
            
            const [isSettingsOpen, setIsSettingsOpen] = useState(false);
            const [activeTab, setActiveTab] = useState('timer');

            // --- AI CHAT STATE ---
            const [isAIOpen, setIsAIOpen] = useState(false);
            const [chatHistory, setChatHistory] = useState([
                { role: 'model', text: 'Xin chào! Tôi là Zen AI. Tôi có thể giúp gì cho bạn hôm nay?' }
            ]);
            const [chatInput, setChatInput] = useState('');
            const [isLoadingAI, setIsLoadingAI] = useState(false);
            const chatEndRef = useRef(null);
            
            const soundEnabled = true;

            // --- AI Logic (Chat Mode) ---
            const scrollToBottom = () => {
                chatEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [chatHistory, isAIOpen]);

            const handleChatSubmit = async () => {
                if (!chatInput.trim() || !apiKey) return;
                
                const userMsg = chatInput;
                setChatInput('');
                setChatHistory(prev => [...prev, { role: 'user', text: userMsg }]);
                setIsLoadingAI(true);

                try {
                    const historyForApi = chatHistory.slice(-10).map(msg => ({
                        role: msg.role === 'model' ? 'model' : 'user',
                        parts: [{ text: msg.text }]
                    }));
                    historyForApi.push({ role: 'user', parts: [{ text: userMsg }] });

                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ contents: historyForApi }),
                        }
                    );
                    
                    const data = await response.json();
                    const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    
                    if (aiText) {
                        setChatHistory(prev => [...prev, { role: 'model', text: aiText }]);
                    } else {
                        setChatHistory(prev => [...prev, { role: 'model', text: 'Xin lỗi, tôi gặp chút trục trặc.' }]);
                    }
                } catch (error) {
                    console.error(error);
                    setChatHistory(prev => [...prev, { role: 'model', text: 'Lỗi kết nối.' }]);
                } finally {
                    setIsLoadingAI(false);
                }
            };

            // --- Timer Logic ---
            useEffect(() => { if (!isActive) setTimeLeft(durations[mode] * 60); }, [durations, mode]);

            useEffect(() => {
                if (isActive && timeLeft > 0) {
                    timerRef.current = setInterval(() => setTimeLeft((prev) => prev - 1), 1000);
                } else if (timeLeft === 0) {
                    clearInterval(timerRef.current);
                    setIsActive(false);
                    if (soundEnabled) playNotificationSound();
                }
                return () => clearInterval(timerRef.current);
            }, [isActive, timeLeft, soundEnabled]);

            useEffect(() => {
                const m = Math.floor(timeLeft / 60);
                const s = timeLeft % 60;
                document.title = `${m}:${s < 10 ? '0' : ''}${s} - Zen Focus`;
            }, [timeLeft]);

            const toggleTimer = () => setIsActive(!isActive);
            const resetTimer = () => { setIsActive(false); setTimeLeft(durations[mode] * 60); };
            const changeMode = (newMode) => { setMode(newMode); setIsActive(false); setTimeLeft(durations[newMode] * 60); };
            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m < 10 ? '0' : ''}${m}:${s < 10 ? '0' : ''}${s}`;
            };
            
            const handleDurationChange = (key, val) => {
                const v = parseInt(val);
                if (!isNaN(v) && v > 0) setDurations(prev => ({ ...prev, [key]: v }));
            };

            const handleFileUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    setBgUrl(URL.createObjectURL(file));
                    setBgType(file.type.startsWith('video') ? 'video' : 'image');
                    setCustomInput('');
                    setVideoError(false);
                }
            };

            const playNotificationSound = () => {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain); gain.connect(ctx.destination);
                osc.type = 'sine'; osc.frequency.value = 880; gain.gain.value = 0.1;
                osc.start(); setTimeout(() => osc.stop(), 500);
            };

            const styleVars = { '--glass-opacity': glassOpacity, color: textColor };

            return (
                <div className="relative min-h-screen w-full overflow-hidden flex flex-col items-center justify-center font-sans text-white" style={styleVars}>
                    
                    {/* BACKGROUND */}
                    <div className="absolute inset-0 z-0 bg-black">
                        <div className="w-full h-full transition-all duration-700" style={{ filter: `brightness(${bgBrightness}) blur(${bgBlur}px)`, transform: `scale(${1 + bgBlur/100})` }}>
                            {(bgType === 'video' && !videoError) ? (
                                <video 
                                    key={bgUrl} 
                                    className="w-full h-full object-cover" 
                                    autoPlay loop muted playsInline 
                                    src={bgUrl}
                                    onError={(e) => {
                                        // Sửa lỗi Circular Object
                                        console.warn("Video load error, switching to fallback.");
                                        setVideoError(true);
                                    }}
                                />
                            ) : (
                                <img 
                                    // Nếu có lỗi video, dùng ảnh mặc định. Nếu không, dùng ảnh custom.
                                    src={videoError ? DEFAULT_BG : bgUrl} 
                                    alt="Bg" 
                                    className="w-full h-full object-cover"
                                    onError={() => setVideoError(true)}
                                />
                            )}
                        </div>
                    </div>

                    {/* ERROR MESSAGE (Vẫn hiển thị để báo user biết) */}
                    {videoError && (
                        <div className="absolute top-4 left-4 z-50 bg-red-600/90 backdrop-blur-md text-white px-4 py-3 rounded-xl shadow-lg border border-red-400/50 flex items-start gap-3 max-w-sm">
                            <AlertCircle className="shrink-0 mt-0.5" />
                            <div className="text-sm">
                                <p className="font-bold mb-1">Không tải được video: {bgUrl}</p>
                                <p className="opacity-90 text-xs mb-2">Đang hiển thị hình nền dự phòng.</p>
                                <button onClick={() => setVideoError(false)} className="text-xs underline hover:text-white/80">Đóng thông báo</button>
                            </div>
                        </div>
                    )}
                    
                    {/* CHAT WINDOW */}
                    {isAIOpen && (
                        <div className="fixed left-4 md:left-10 top-20 bottom-20 w-80 glass-chat-window rounded-3xl flex flex-col z-50 animate-slide-chat border border-white/20 overflow-hidden">
                            <div className="p-4 border-b border-white/10 flex justify-between items-center bg-white/5">
                                <div className="flex items-center gap-2">
                                    <Sparkles className="text-yellow-300" size={18} />
                                    <span className="font-bold tracking-wide">Zen AI</span>
                                </div>
                                <button onClick={() => setIsAIOpen(false)} className="opacity-60 hover:opacity-100 hover:rotate-90 transition-transform"><X size={18} /></button>
                            </div>
                            <div className="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar">
                                {chatHistory.map((msg, idx) => (
                                    <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                        <div className={`max-w-[85%] px-4 py-2 text-sm leading-relaxed ${msg.role === 'user' ? 'bubble-user text-right' : 'bubble-ai text-left'}`}>
                                            {msg.text}
                                        </div>
                                    </div>
                                ))}
                                {isLoadingAI && (
                                    <div className="flex justify-start">
                                        <div className="bubble-ai px-4 py-3 flex gap-1">
                                            <div className="w-1.5 h-1.5 bg-white/60 rounded-full typing-dot"></div>
                                            <div className="w-1.5 h-1.5 bg-white/60 rounded-full typing-dot"></div>
                                            <div className="w-1.5 h-1.5 bg-white/60 rounded-full typing-dot"></div>
                                        </div>
                                    </div>
                                )}
                                <div ref={chatEndRef} />
                            </div>
                            <div className="p-3 bg-white/5 border-t border-white/10">
                                <div className="flex gap-2">
                                    <input 
                                        type="text" 
                                        placeholder="Nhập tin nhắn..." 
                                        className="glass-input flex-1 rounded-full px-4 py-2 text-sm"
                                        value={chatInput}
                                        onChange={(e) => setChatInput(e.target.value)}
                                        onKeyDown={(e) => e.key === 'Enter' && handleChatSubmit()}
                                    />
                                    <button 
                                        onClick={handleChatSubmit} 
                                        disabled={isLoadingAI}
                                        className="w-9 h-9 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition-colors disabled:opacity-50"
                                    >
                                        <Send size={16} />
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MAIN UI */}
                    <div className="relative z-10 w-full max-w-lg px-4 flex flex-col items-center gap-8 text-custom">
                        
                        {/* Header */}
                        <div className="w-full flex justify-center items-center mb-2">
                            <div className="flex items-center gap-2">
                                <div className={`w-2 h-2 rounded-full ${isActive ? 'bg-green-400 animate-pulse' : 'bg-red-400'}`}></div>
                                <span className="text-sm font-medium tracking-widest uppercase opacity-80 text-shadow-lg">Zen Focus</span>
                            </div>
                        </div>

                        {/* SETTINGS PANEL */}
                        {isSettingsOpen && (
                            <div className="w-full glass-element rounded-3xl p-6 animate-expand-settings backdrop-blur-2xl absolute z-50 bottom-24 shadow-2xl border border-white/40 overflow-hidden" style={{ transformOrigin: 'calc(100% - 3rem) 100%' }}>
                                <div className="flex justify-between items-center mb-6 border-b border-white/10 pb-2">
                                    <div className="flex gap-4">
                                        <button onClick={() => setActiveTab('timer')} className={`text-xs font-bold uppercase tracking-wider ${activeTab === 'timer' ? 'opacity-100 border-b-2 border-white' : 'opacity-50'}`}>Thời gian</button>
                                        <button onClick={() => setActiveTab('bg')} className={`text-xs font-bold uppercase tracking-wider ${activeTab === 'bg' ? 'opacity-100 border-b-2 border-white' : 'opacity-50'}`}>Hình nền</button>
                                        <button onClick={() => setActiveTab('style')} className={`text-xs font-bold uppercase tracking-wider ${activeTab === 'style' ? 'opacity-100 border-b-2 border-white' : 'opacity-50'}`}>Giao diện</button>
                                    </div>
                                    <button onClick={() => setIsSettingsOpen(false)} className="hover:rotate-90 transition-transform"><X size={18}/></button>
                                </div>
                                
                                {activeTab === 'timer' && (
                                    <div className="grid grid-cols-3 gap-4 mb-2 animate-in fade-in duration-300">
                                        {modeKeys.map(k => (
                                            <div key={k} className="flex flex-col gap-2">
                                                <label className="text-xs opacity-60 ml-1 font-semibold">{MODES[k].label}</label>
                                                <input type="number" value={durations[k]} onChange={(e) => handleDurationChange(k, e.target.value)} className="glass-input w-full rounded-xl px-3 py-2 text-center text-sm font-medium"/>
                                            </div>
                                        ))}
                                    </div>
                                )}
                                {activeTab === 'bg' && (
                                    <div className="space-y-4 animate-in fade-in duration-300">
                                        <div className="flex gap-2">
                                            <input type="text" placeholder="Link ảnh/video..." value={customInput} onChange={(e) => setCustomInput(e.target.value)} className="glass-input flex-1 rounded-xl px-3 py-2 text-sm"/>
                                            <button onClick={() => { if(customInput) { setBgUrl(customInput); setBgType(customInput.match(/\.(mp4|webm|ogg)$/i) ? 'video':'image'); setVideoError(false); }}} className="glass-button px-3 rounded-xl"><Check size={18}/></button>
                                        </div>
                                        <div className="relative group">
                                            <div className="w-full glass-button border-dashed flex items-center justify-center gap-2 py-3 rounded-xl hover:bg-white/10 transition-colors"><Upload size={16}/> <span className="text-sm font-medium">Tải file lên</span></div>
                                            <input type="file" accept="image/*,video/*" onChange={handleFileUpload} className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-50"/>
                                        </div>
                                        <div className="space-y-4 mt-4 pt-4 border-t border-white/10">
                                            <div className="flex items-center justify-between"><span className="text-xs uppercase font-bold opacity-80 flex gap-2"><Sun size={14}/> Độ sáng</span><input type="range" min="0" max="2" step="0.1" value={bgBrightness} onChange={(e)=>setBgBrightness(e.target.value)} className="w-1/2"/></div>
                                            <div className="flex items-center justify-between"><span className="text-xs uppercase font-bold opacity-80 flex gap-2"><Eye size={14}/> Độ mờ</span><input type="range" min="0" max="20" step="1" value={bgBlur} onChange={(e)=>setBgBlur(e.target.value)} className="w-1/2"/></div>
                                        </div>
                                    </div>
                                )}
                                {activeTab === 'style' && (
                                    <div className="space-y-4 animate-in fade-in duration-300">
                                        <div className="flex items-center justify-between"><span className="text-xs uppercase font-bold opacity-80 flex gap-2"><Palette size={14}/> Độ đục kính</span><input type="range" min="0" max="1" step="0.05" value={glassOpacity} onChange={(e)=>setGlassOpacity(e.target.value)} className="w-1/2"/></div>
                                        <div className="flex items-center justify-between"><span className="text-xs uppercase font-bold opacity-80 flex gap-2"><Type size={14}/> Màu chữ</span><input type="color" value={textColor} onChange={(e)=>setTextColor(e.target.value)} className="w-8 h-8 rounded-full cursor-pointer bg-transparent border border-white/30 p-0 shadow-sm"/></div>
                                        <div className="pt-2 text-right"><button onClick={()=>{setBgBrightness(0.8);setBgBlur(0);setTextColor('#ffffff');setGlassOpacity(0.1)}} className="text-xs underline opacity-50 hover:opacity-100">Mặc định</button></div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* TIMER */}
                        <div className="relative py-8">
                            <div className="text-[9rem] leading-none font-light tracking-tighter select-none tabular-nums relative z-10 drop-shadow-2xl">{formatTime(timeLeft)}</div>
                            <div className="text-center opacity-70 text-sm tracking-[0.3em] font-light uppercase mt-2">{isActive ? 'Đang tập trung' : 'Sẵn sàng?'}</div>
                        </div>

                        {/* MODE SELECTOR */}
                        <div className="glass-element glass-pill p-1.5 flex w-full max-w-sm relative overflow-hidden">
                            <div className="absolute top-1.5 bottom-1.5 glass-pill-bg rounded-full transition-all duration-300 ease-out" style={{ width: 'calc(33.33% - 8px)', left: `calc(${modeKeys.indexOf(mode) * 33.33}% + 4px)` }}/>
                            {Object.entries(MODES).map(([key, m]) => (
                                <button key={key} onClick={() => changeMode(key)} className={`flex-1 py-3 text-sm font-bold rounded-full relative z-10 transition-colors duration-300 ${mode === key ? 'text-inherit' : 'opacity-60 hover:opacity-100'}`} style={{color: 'inherit'}}>
                                    {m.label}
                                </button>
                            ))}
                        </div>

                        {/* CONTROLS */}
                        <div className="flex items-center gap-6 justify-center w-full">
                            <button onClick={()=>{setIsAIOpen(!isAIOpen);setIsSettingsOpen(false)}} className={`glass-button w-16 h-16 rounded-full flex items-center justify-center opacity-90 hover:opacity-100 ${isAIOpen?'bg-yellow-400/20 text-yellow-200 shadow-[0_0_20px_rgba(253,224,71,0.3)]':''}`}><Sparkles size={22} className={isAIOpen?'animate-pulse':''}/></button>
                            <button onClick={resetTimer} className="glass-button w-16 h-16 rounded-full flex items-center justify-center opacity-90 hover:opacity-100"><RotateCcw size={22}/></button>
                            <button onClick={toggleTimer} className={`glass-button w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 border-2 ${isActive?'bg-white/20 border-white/60 shadow-[0_0_20px_rgba(255,255,255,0.2)]':'bg-white/5 border-white/40'}`}>
                                {isActive ? <Pause size={24} fill="currentColor" className="opacity-90"/> : <Play size={24} fill="currentColor" className="ml-1 opacity-90"/>}
                            </button>
                            <button onClick={()=>{setIsSettingsOpen(!isSettingsOpen);setIsAIOpen(false)}} className={`glass-button w-16 h-16 rounded-full flex items-center justify-center opacity-90 hover:opacity-100 transition-all duration-500 ${isSettingsOpen?'bg-white/30 rotate-90 scale-90':''}`}><Settings size={22}/></button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
